{
  "MARK_SCHEME_PROMPT": "Generate a numbered Scheme of Evaluation in this format, for each Question X:\n\nQuestion X: <verbatim question>\n\nAnswer template: List the core concepts or their clear equivalents that a full answer must reference, arranged in logical order.\n\nMarking Scheme:\n\n(A marks) A bullet that describes the first key expectation (concept or application) in context.\n\n(B marks) A bullet for the second expectation.\n\n…\n\n(–C marks) A bullet describing any automatic deduction (for example missing required context or terms).\n\nEnsure that:\n\nThe sum of A + B + … equals the total marks for Question X.\n\nAssessment Objectives are stated briefly at the top (for example, Conceptual Understanding, Application & Problem-Solving, Relevance & Specificity).\n\nPlease include a Notes section with each question’s mark scheme:\n\nOpen-ended questions: any one comprehensive, context-relevant answer can earn full marks.\n\nMinor calculation errors should not cost any marks if reasoning is sound.\n\nCoding expectations or no alternative approaches rules when applicable.\n\nBullets must call out the concept or context the student needs to cover, but need not use verbatim phrasing—equivalent meaning is fine. Provide marks liberally if the student shows rich understanding even if not using the right terms.\n\nPlease create a mark scheme for the following questions: ${questions}",
  "parse_mark_scheme": "You are an expert at parsing mark scheme documents. Your task is to extract questions, answers, and marking schemes from the following document and return the result as a valid JSON object.\n\nDocument:\n{text}\n\nDocument structure hints:\n{chr(10).join('- ' + hint for hint in format_hints)}\n\nInstructions:\n- Parse each question, including its text, correct answer, and marking scheme.\n- For each question, include any sub-questions with their respective answers and marking schemes.\n- Return a JSON object with the following structure:\n  {\n    \"1\": {\n      \"question\": \"Question text\",\n      \"correct_answer\": \"Correct answer text\",\n      \"marking_scheme\": \"Marking scheme text\",\n      \"sub_questions\": [\n        {\n          \"id\": \"a\",\n          \"question\": \"Sub-question text\",\n          \"correct_answer\": \"Sub-question answer\",\n          \"marking_scheme\": \"Sub-question marking scheme\"\n        }\n      ]\n    },\n    \"2\": { ... }\n  }\n- If a section (question, answer, or marking scheme) is missing, use an empty string for that field.\n- Ensure the JSON is valid, with proper commas, quotes, and brackets.\n- Do NOT include any text outside the JSON object (e.g., no explanations, no ```json``` blocks, no markdown).\n- Do NOT wrap the JSON in code blocks or add any prefix/suffix text.\n\nOutput only a valid JSON object.",
  "topic_prompt": "Analyze the following exam questions and group them into 5-7 core academic topics.\nEnsure each question is mapped to exactly one topic. Use clear, standardized topic names.\n\nQuestions:\n{json.dumps(questions, indent=2)}\n\nFormat response EXACTLY as a valid JSON object with:\n- \"topics\": array of 5-7 topic names\n- \"question_mapping\": {\"question_number\": \"topic_name\"}\n\nIMPORTANT: Return only a valid JSON object and nothing else. No explanations, no markdown formatting.",
  "topic_retry_prompt": "Analyze the following exam questions and group them into 5-7 core academic topics.\n\nQuestions:\n{json.dumps(questions, indent=2)}\n\nYOUR RESPONSE MUST BE A VALID JSON OBJECT ONLY - NO TEXT BEFORE OR AFTER.\nDO NOT USE MARKDOWN CODE BLOCKS OR BACKTICKS.\n\nThe JSON should have this exact structure:\n{\n  \"topics\": [\"Topic1\", \"Topic2\", \"Topic3\", \"Topic4\", \"Topic5\"],\n  \"question_mapping\": {\"1\": \"Topic1\", \"2\": \"Topic2\", ...}\n}",
  "EVALUATION_PROMPT": "Evaluate the following answer:\nQuestion {q_num} ({marks} marks): {question_text}\nCorrect Answer: {correct_answer}\nMarking Scheme: {marking_scheme}\n\nStudent's Answer:\n{student_text}\n\nEvaluation Guidelines:\n\nText Evaluation: Compare the student's textual answer to the correct answer and marking scheme. Award marks based on accuracy, completeness, and relevance. Even if the answer contrasts with what is given in the mark scheme, if the student has given a sound explanation to the answer, then you could give marks based on your judgement. Always when you are torn between giving a lower and a higher score, always give the higher one. If no text and image are provided, award 0 marks.\nRequired Output (JSON format):\n{\n\"score\": \"X/{marks}\",\n\"text_feedback\": \"Detailed analysis of the textual answer or 'No text provided' if none avoid stating that certain deficiencies in the answer are all right like 'calculation mistakes do not matter', but highlight these deficiencies in the improvement suggestions. There is no need to explain the partial marks breakdown in the feedback or refer to the marking scheme\",\n\"improvement_suggestions\": \"Specific suggestions for improvement, including possible better ways \"\n}"
}

